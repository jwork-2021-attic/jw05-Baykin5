# JW05

设计目标：一个葫芦娃妖精对战的rougelike游戏

参考游戏：挺进地牢

玩家开局可以选择特定人物（七个葫芦娃之一），每个人物有其特定的技能

葫芦娃的基础攻击方式：用葫芦发出直线型子弹进行攻击。

## 游戏机制

### 葫芦娃

**（已实现）**

大娃：5s内提升20点攻击力，冷却时间20s

二娃：对距离最近的妖怪造成50点伤害，冷却时间3s

三娃：5s内受到的伤害减少50% 如果处于濒死状态，则会回复已损失生命值的50%，冷却时间20s

**（以下葫芦娃暂未实现）**

四娃：向周围喷射出火焰，范围内的怪物会受到伤害并陷入烧伤状态（持续掉血）

五娃：对周围的怪物造成伤害，并使其陷入减速状态（移速和攻击频率降低）

六娃：一定时间内处于无敌状态

七娃：消灭两格内所有小型怪物，或对BOSS造成巨大伤害



### 妖怪

#### 小型怪物：

蛤蟆精：喷出霰弹型的慢速粘液对葫芦娃进行攻击。

蝙蝠精：喷出快速的直线型子弹对葫芦娃进行攻击。

#### BOSS：

金蛇精：会向四周发出慢速弹幕，并且无限召唤小怪。



## 游戏特色

- 每一关的地图随机生成

- 游戏界面下方有信息展示，可以显示葫芦娃的HP、攻击、技能状态以及BOSS血条

- 怪物受击时会变色

  

## 设计思路

所有可自主移动的生物都继承了`Runnable`（玩家类`Calabash`、怪物类`Monster`） 

一开始想过将子弹也作为线程，但这样的话线程数量太多，非常容易引起同步上面的问题，索性放在主线程里进行刷新。

整个游戏类`GameThread`负责游戏的运行，其是一个主线程，统筹所有生物的线程信息。

关卡控制类`LevelController`负责怪物的生成、关卡胜利信物的生成等等，是一个独立的线程。



因为子弹可以和生物以及地图要素相重合，而项目的原始架构中一个Tile只可以容纳一个Thing对象，因此在jw04的基础上进行了重构，一个Tile可以容纳一个地图要素/生物以及若干个子弹，展示顺序是生物>子弹>地图资源。



## 未来

受限于UI和时间，还有很多挺进地牢的游戏元素没有添加，未来有空的话可能会对本游戏进行更新吧。

- 添加更多的葫芦娃和怪物
- 优化地图生成，将只有对战的大地图改成不同类型的房间进行随机探索
- 添加怪物掉落
- 添加强化道具